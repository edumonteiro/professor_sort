
<h5>Current Semester: <%= decode_semester(current_semester) %></h5>
<table class='table table-hover'  id='admin_offering_table'>
  <caption><h4>Offerings Listing</h4></caption>
  <thead>
    <tr>
      <th>Name</th>
      <th>Letter</th>
      <th>Schedule</th>
      <th>Professor</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @offerings.each do |offering| %>
      <% if offering.professor && offering.professor.offerings.where(semester: current_semester).count == 2 %>
        <tr class='bg-success'>
      <% elsif offering.professor && offering.professor.offerings.where(semester: current_semester).count == 1 %>
        <tr class='bg-info'>
      <% else %>
        <tr>
      <% end %>
        <td><%= link_to offering.course.name,edit_admin_offering_path(offering) %></td>
        <td id='offering_table_letter'><%= offering.letter %></td>
        <td><%= Offering.decode_schedule(offering.schedule) %></td>
        <%if offering.professor_id%>
          <td><%= offering.professor.name %></td>
        <%else%>
          <td style="color:red;">To be assigned</td>
        <%end%>
        <td>
        <% if offering.professor_id %>
          <%= link_to 'Remove professor',admin_offering_resetprof_path(offering),method: :put %>
        <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<div class="panel-default well">
  <div class="panel-heading">
    <h3 class='panel-title'>Add new offering</h3>
  </div>
  <div class="panel-body">
    <%= form_for [:admin, @new_offering] do |f| %>
      <div class="form-group col-md-4">
        <%= f.label :course_id %><br>
        <%= f.select :course_id, options_for_select(Course.order(:name).pluck(:name, :id)), :prompt => "Please select" %>
      <div id="timeforms"></div>
      </div>
      <div class="form-group col-md-4">
        <%= f.label :letter %><br>
        <%= f.select :letter,options_for_select(("A".."Z").to_a.zip(("A".."Z").to_a)), :prompt => "Please select" %>
      </div>
      <div class="form-group" style="display: none">
        <%= f.label :schedule %><br>
        <%= f.text_field :schedule %>
      </div>
      <div class="form-group col-md-4">
        <%= f.label :professor_id %><br>
        <%= f.select :professor_id, options_for_select(Professor.pluck(:name, :id)), :prompt => "Please select" %>
      </div>
      <div class="actions col-md-4">
        <button type="submit" class="btn btn-primary">Submit</button>
      </div>
    <% end %>
  </div>
</div>

<div class='row'>
  <%= link_to 'Notify All Professors (email each professor)', admin_notify_all_path, method: :post, data: {confirm: 'Are you sure?'},class: 'btn btn-warning col-md-4 col-md-offset-1'  %>
</div>
<div class='row'>
  <%= link_to 'Remove all professors', admin_offerings_clear_path, class: 'btn btn-danger col-md-4 col-md-offset-1', data: {confirm: 'Are you sure?'} %>
</div>
  <%= link_to 'Magic GO!', admin_offerings_domagic_path , method: :get, data: {confirm: 'Ready?'},class: 'btn btn-primary col-md-3 col-md-offset-3',style: 'padding:25px;margin-left:60%;margin-top:-6%;height:70px;'  %>
